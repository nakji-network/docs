"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[575],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return u}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(n),u=r,k=c["".concat(o,".").concat(u)]||c[u]||m[u]||i;return n?a.createElement(k,s(s({ref:t},d),{},{components:n})):a.createElement(k,s({ref:t},d))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=c;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l.mdxType="string"==typeof e?e:r,s[1]=l;for(var p=2;p<i;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5063:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return o},metadata:function(){return p},toc:function(){return d},default:function(){return c}});var a=n(3117),r=n(102),i=(n(7294),n(3905)),s=["components"],l={sidebar_position:4},o="APIs",p={unversionedId:"reference/apis",id:"reference/apis",title:"APIs",description:"Overview",source:"@site/docs/reference/apis.md",sourceDirName:"reference",slug:"/reference/apis",permalink:"/docs/reference/apis",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Auth",permalink:"/docs/reference/auth"}},d=[{value:"Overview",id:"overview",children:[],level:2},{value:"REST API",id:"rest-api",children:[{value:"Endpoints",id:"endpoints",children:[],level:3},{value:"<code>/tv/reference/symbols</code>",id:"tvreferencesymbols",children:[{value:"Example:",id:"example",children:[],level:4}],level:3},{value:"<code>/tv/reference/symbols/&lt;streamName&gt;</code>",id:"tvreferencesymbolsstreamname",children:[{value:"Example:",id:"example-1",children:[],level:4}],level:3},{value:"<code>/data</code>",id:"data",children:[{value:"Example:",id:"example-2",children:[],level:4}],level:3},{value:"<code>/pair</code>",id:"pair",children:[{value:"Example:",id:"example-3",children:[],level:4}],level:3},{value:"<code>/lpe/ohlcvvvv</code>",id:"lpeohlcvvvv",children:[],level:3}],level:2},{value:"Realtime API",id:"realtime-api",children:[{value:"Examples",id:"examples",children:[{value:"single stream",id:"single-stream",children:[],level:4},{value:"wildcard streams",id:"wildcard-streams",children:[],level:4},{value:"multiple streams",id:"multiple-streams",children:[],level:4}],level:3}],level:2},{value:"Notes",id:"notes",children:[],level:2}],m={toc:d};function c(e){var t=e.components,n=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"apis"},"APIs"),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"Nakji offers two APIs, a ",(0,i.kt)("a",{parentName:"p",href:"#realtime-api"},"REST (historical) API")," as well as a ",(0,i.kt)("a",{parentName:"p",href:"#realtime-api"},"Realtime API"),"."),(0,i.kt)("p",null,"This is a work in progress. If you have any questions and concerns, please feel free to reach out to us via TG, Discord, or email."),(0,i.kt)("h2",{id:"rest-api"},"REST API"),(0,i.kt)("p",null,"The REST API is for getting metadata and historical data. All REST API endpoints require ",(0,i.kt)("a",{parentName:"p",href:"auth"},"authentication")," during the private beta."),(0,i.kt)("p",null,"The endpoints starting with ",(0,i.kt)("inlineCode",{parentName:"p"},"/tv")," are designed to be compatible with the Tradingview charting library."),(0,i.kt)("p",null,"Base URL: ",(0,i.kt)("inlineCode",{parentName:"p"},"https://api.nakji.network/v1")),(0,i.kt)("h3",{id:"endpoints"},"Endpoints"),(0,i.kt)("h3",{id:"tvreferencesymbols"},(0,i.kt)("inlineCode",{parentName:"h3"},"/tv/reference/symbols")),(0,i.kt)("p",null,"List all available streams. Note: this response may take some time to finish loading"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Request vars:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"search"),": search for contract address, token name, etc."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"namespace"),": retrieve the most recently active pairs in a protocol")),(0,i.kt)("h4",{id:"example"},"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'curl -i -X GET \\\n  -H \'Origin: https://yourdomain\' \\\n  -H \'Authorization:Bearer <apikey>\' \\\n  "https://api.nakji.network/v1/tv/reference/symbols"\n\n# Response format is `ldjson`, newline delimited json\n{"symbol":"eth","full_name":"eth:eth","description":"eth.eth.averagedifficulty.1m","exchange":"eth","ticker":"eth.eth.averagedifficulty.1m","type":"indicator"}\n{"symbol":"eth","full_name":"eth:eth","description":"eth.eth.averagegasused.1m","exchange":"eth","ticker":"eth.eth.averagegasused.1m","type":"indicator"}\n{"symbol":"eth","full_name":"eth:eth","description":"eth.eth.averagegasprice.1m","exchange":"eth","ticker":"eth.eth.averagegasprice.1m","type":"indicator"}\n{"symbol":"SLC-USDT","full_name":"uniswapv2:SLC-USDT","description":"uniswapv2.SLC-USDT.liquiditypool-1m0s (0x00004EE988665Cdda9A1080d5792cecD16Dc1220)","exchange":"uniswapv2","ticker":"uniswapv2.0x00004EE988665Cdda9A1080d5792cecD16Dc1220.liquiditypool-1m0s","type":"aggregate"}\n{"symbol":"SLC-USDT","full_name":"uniswapv2:SLC-USDT","description":"uniswapv2.SLC-USDT.trade-1m0s (0x00004EE988665Cdda9A1080d5792cecD16Dc1220)","exchange":"uniswapv2","ticker":"uniswapv2.0x00004EE988665Cdda9A1080d5792cecD16Dc1220.trade-1m0s","type":"aggregate"}\n{"symbol":"OWL-WETH","full_name":"uniswapv2:OWL-WETH","description":"uniswapv2.OWL-WETH.liquiditypool-1m0s (0x0005eE2Ef3F313aE168451ef8174b4fCC508819F)","exchange":"uniswapv2","ticker":"uniswapv2.0x0005eE2Ef3F313aE168451ef8174b4fCC508819F.liquiditypool-1m0s","type":"aggregate"}\n{"symbol":"OWL-WETH","full_name":"uniswapv2:OWL-WETH","description":"uniswapv2.OWL-WETH.trade-1m0s (0x0005eE2Ef3F313aE168451ef8174b4fCC508819F)","exchange":"uniswapv2","ticker":"uniswapv2.0x0005eE2Ef3F313aE168451ef8174b4fCC508819F.trade-1m0s","type":"aggregate"}\n\n\ncurl -i -X GET \\\n  -H \'Origin: https://yourdomain\' \\\n  -H \'Authorization:Bearer <apikey>\' \\\nhttps://api.nakji.network/v1/tv/reference/symbols\\?search\\=0x58f876857a02d6762e0101bb5c46a8c1ed44dc16\n\n{"symbol":"Cake-LP-BUSD","full_name":"pancakeswapv2:Cake-LP-BUSD","description":"pancakeswapv2.Cake-LP-BUSD.trade-1m0s (0x1016CFdA658D6Df132e15D2DFdd90F195c22886f)","exchange":"pancakeswapv2","ticker":"pancakeswapv2.0x1016CFdA658D6Df132e15D2DFdd90F195c22886f.trade-1m0s","type":"aggregate"}\n{"symbol":"Cake-LP-BUSD","full_name":"pancakeswapv2:Cake-LP-BUSD","description":"pancakeswapv2.Cake-LP-BUSD.liquiditypool-1m0s (0x1016CFdA658D6Df132e15D2DFdd90F195c22886f)","exchange":"pancakeswapv2","ticker":"pancakeswapv2.0x1016CFdA658D6Df132e15D2DFdd90F195c22886f.liquiditypool-1m0s","type":"aggregate"}\n{"symbol":"WBNB-BUSD","full_name":"pancakeswapv2:WBNB-BUSD","description":"pancakeswapv2.WBNB-BUSD.liquiditypool-1m0s (0x58F876857a02D6762E0101bb5C46A8c1ED44Dc16)","exchange":"pancakeswapv2","ticker":"pancakeswapv2.0x58F876857a02D6762E0101bb5C46A8c1ED44Dc16.liquiditypool-1m0s","type":"aggregate"}\n{"symbol":"WBNB-BUSD","full_name":"pancakeswapv2:WBNB-BUSD","description":"pancakeswapv2.WBNB-BUSD.trade-1m0s (0x58F876857a02D6762E0101bb5C46A8c1ED44Dc16)","exchange":"pancakeswapv2","ticker":"pancakeswapv2.0x58F876857a02D6762E0101bb5C46A8c1ED44Dc16.trade-1m0s","type":"aggregate"}\n')),(0,i.kt)("h3",{id:"tvreferencesymbolsstreamname"},(0,i.kt)("inlineCode",{parentName:"h3"},"/tv/reference/symbols/<streamName>")),(0,i.kt)("p",null,"Get stream info."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Request vars"),": none"),(0,i.kt)("h4",{id:"example-1"},"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'curl -i -X GET \\\n  -H \'Origin: https://yourdomain\' \\\n  -H \'Authorization:Bearer <apikey>\' \n  https://api.nakji.network/v1/tv/reference/symbols/uniswapv2.0xDFC14d2Af169B0D36C4EFF567Ada9b2E0CAE044f.trade-1m0s\n\n{\n "s":"ok",\n "name":"AAVE-WETH",\n "timezone":"Etc/UTC",\n "minmov":1,\n "pricescale":100000000,\n "has_intraday":true,\n "has_daily":true,\n "has_weekly_and_monthly":true,\n "has_no_volume":false,\n "ticker":"uniswapv2.0xDFC14d2Af169B0D36C4EFF567Ada9b2E0CAE044f.trade-1m0s",\n "description":"AAVE-WETH (0xDFC14d2Af169B0D36C4EFF567Ada9b2E0CAE044f)",\n "type":"aggregate",\n "data_status":"streaming",\n "supported_resolutions":["1S","1","3","5","15","30","45","60","120","180","240","1D","1W","1M","12M"],\n "intraday_multipliers":["1","5","15","30","60","D","W"],\n "session":"24x7",\n "exchange":"uniswapv2",\n "has_seconds":false,\n "seconds_multipliers":null,\n "has_empty_bars":true\n }\n')),(0,i.kt)("h3",{id:"data"},(0,i.kt)("inlineCode",{parentName:"h3"},"/data")),(0,i.kt)("p",null,"Get historical data. The data format this endpoint returns is the same as it is stored."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Request vars:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"param")," ",(0,i.kt)("inlineCode",{parentName:"li"},"symbol")," seearch filter (e.g. uniswapv2.0xBB8a43724dE8BC071d7278bAcCB19363545fE758.liquiditypoolevent)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"param")," ",(0,i.kt)("strong",{parentName:"li"},"unix time ms")," ",(0,i.kt)("inlineCode",{parentName:"li"},"from")," (optional) time window lower bound"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"param")," ",(0,i.kt)("strong",{parentName:"li"},"unix time ms")," ",(0,i.kt)("inlineCode",{parentName:"li"},"to")," (optional) time window upper bound, defaults to now."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"param")," ",(0,i.kt)("strong",{parentName:"li"},"int")," ",(0,i.kt)("inlineCode",{parentName:"li"},"limit")," (optional) database query limit (max. 100)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"param")," ",(0,i.kt)("strong",{parentName:"li"},"enum")," ",(0,i.kt)("inlineCode",{parentName:"li"},"resolution")," (optional) time box, defaults to 1 minute\n{",(0,i.kt)("br",{parentName:"li"}),'"1S":  "1 second",\n"5S":  "5 seconds",\n"10S": "10 seconds",\n"15S": "15 seconds",\n"30S": "30 seconds",\n"1":   "1 minute",\n"3":   "3 minute",\n"5":   "5 minutes",\n"15":  "15 minutes",\n"30":  "30 minutes",\n"60":  "1 hour",\n"1H":  "1 hour",\n"2H":  "2 hour",\n"4H":  "4 hour",\n"D":   "1 day",\n"W":   "1 week",\n}')),(0,i.kt)("h4",{id:"example-2"},"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"curl -i -X GET \\\n  -H 'Origin: https://youtdomain' \\\n  -H 'Authorization:Bearer <apikey>' \\\n  \"https://api.nakji.network/v1/data?symbol=daofi.0x2C98813dea4AA80F0F160748450f0ABFd51FB558.liquiditypoolevent&from=1616805306000&to=1616915273000&resolution=1\"\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Response")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n    "ns":"daofi",\n    "s":"0x2C98813dea4AA80F0F160748450f0ABFd51FB558",\n    "ts":"2021-03-27T05:05:48Z",\n    "block":12119181,\n    "idx":241,\n    "tx":"9uPiY9Fg2aVNNmUnwILz7gT2Z9D3svLp3j+1/tVep40=",    //  base64 encoded\n    "sender":"eiUNVjC0z1OXOd8sXay0xlnySI0=, //  base64 encoded\n    "to":"FHgbdfaYtmrOvJq8L/iTQ5ke3tE=",    //  base64 encoded\n    "amount0In":100000000000000000,\n    "amount0Out":0,\n    "amount1In":0,\n    "amount1Out":367394634193879528\n}\n')),(0,i.kt)("h3",{id:"pair"},(0,i.kt)("inlineCode",{parentName:"h3"},"/pair")),(0,i.kt)("p",null,"Retrieves metada of a pair."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Request vars:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"param")," ",(0,i.kt)("inlineCode",{parentName:"li"},"network")," network name (e.g. ethereum)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"param")," ",(0,i.kt)("inlineCode",{parentName:"li"},"address")," hex address within the network (e.g. 0xBB8a43724dE8BC071d7278bAcCB19363545fE758)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"returns"),"  pair and token info")),(0,i.kt)("h4",{id:"example-3"},"Example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"curl -i -X GET \\\n  -H 'Origin: https://youtdomain' \\\n  -H 'Authorization:Bearer <apikey>' \\\n  \"https://api.nakji.network/v1/pair?network=ethereum&address=0x67483a1229b1304d9df461fb8e7671b1bd66e3fa\"\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Response")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n    "network": "ethereum",\n    "address": "0x67483a1229b1304d9df461fb8e7671b1bd66e3fa",\n    "app": "uniswapv2",\n    "token0": {\n        "address": "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",\n        "decimals": 6,\n        "name": "USD Coin",\n        "symbol": "USDC"\n    },\n    "token1": {\n        "address": "0xD2dDa223b2617cB616c1580db421e4cFAe6a8a85",\n        "decimals": 18,\n        "name": "Bondly Token",\n        "symbol": "BONDLY"\n    }\n}\n')),(0,i.kt)("h3",{id:"lpeohlcvvvv"},(0,i.kt)("inlineCode",{parentName:"h3"},"/lpe/ohlcvvvv")),(0,i.kt)("p",null,"Get candlestick data for any AMM dex that is supported. Only streams that end in ",(0,i.kt)("inlineCode",{parentName:"p"},".liquiditypoolevent-1m0s")," or ",(0,i.kt)("inlineCode",{parentName:"p"},".trade-1m0s")," can use this endpoint. Timeframes(",(0,i.kt)("inlineCode",{parentName:"p"},"resolution"),"s) larger than 1m are aggregated using the ",(0,i.kt)("inlineCode",{parentName:"p"},"*-1m0s")," data."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"curl -i -X GET \\\n  -H 'Origin: https://youtdomain' \\\n  -H 'Authorization:Bearer <apikey>' \\\n\"https://api.nakji.network/v1/lpe/ohlcvvvv?apikey=&symbol=uniswapv2.0xCc3d1EceF1F9fD25599dbeA2755019DC09db3c54.liquiditypoolevent-1m0s&from=1615885305000&to=1616091703000&resolution=1\"\n")),(0,i.kt)("h2",{id:"realtime-api"},"Realtime API"),(0,i.kt)("p",null,"Base URL: ",(0,i.kt)("inlineCode",{parentName:"p"},"https://stream.nakji.network/")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/ws"),": Websockets endpoint."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/sse"),": ",(0,i.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events"},"Server sent events")," endpoint.")),(0,i.kt)("p",null,"Note: Both endpoints only support unidirectional data transmission at this time."),(0,i.kt)("h3",{id:"examples"},"Examples"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"You can use ",(0,i.kt)("a",{parentName:"em",href:"https://github.com/websockets/wscat"},"wscat")," to test the websockets endpoint from your terminal. You can use ",(0,i.kt)("inlineCode",{parentName:"em"},"curl")," to query the SSE endpoint.")),(0,i.kt)("h4",{id:"single-stream"},"single stream"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'wscat -c "wss://stream.nakji.network/ws?streams=sushiswap.<pairid>.trade-1m0s"\ncurl https://stream.nakji.network/sse?streams=sushiswap.<pairid>.trade-1m0s\n')),(0,i.kt)("h4",{id:"wildcard-streams"},"wildcard streams"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'# This will subscribe to real time LP updates.\n# For example, for all uniswap pairs you can subscribe to `uniswapv2.*.liquiditypool`\nwscat -c "wss://stream.nakji.network/ws?streams=sushiswap.*.trade-1m0s"\ncurl https://stream.nakji.network/sse?streams=sushiswap.*.trade-1m0s\n')),(0,i.kt)("h4",{id:"multiple-streams"},"multiple streams"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'wscat -c "wss://stream.nakji.network/ws?streams=x&streams=y&streams=z"\ncurl https://stream.nakji.network/sse?streams=x&streams=y&streams=z\n')),(0,i.kt)("h2",{id:"notes"},"Notes"),(0,i.kt)("p",null,"Stream names are case sensitive. Pair IDs are case sensitive to their checksummed values."))}c.isMDXComponent=!0}}]);